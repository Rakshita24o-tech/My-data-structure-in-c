#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char** split(const char *str, char delim, int *count) {
    char **tokens = NULL;      
    int tokenCount = 0;
    int start = 0;             
    int len = strlen(str);

    for (int i = 0; i <= len; i++) {
        if (str[i] == delim || str[i] == '\0') {
            int tokenLen = i - start;
            if (tokenLen > 0) {
                
                char *token = (char *)malloc((tokenLen + 1) * sizeof(char));
                if (!token) {
                    printf("Memory allocation failed!\n");
                    exit(1);
                }

                
                for (int j = 0; j < tokenLen; j++)
                    token[j] = str[start + j];
                token[tokenLen] = '\0';

                
                char **temp = (char **)realloc(tokens, (tokenCount + 1) * sizeof(char *));
                if (!temp) {
                    printf("Reallocation failed!\n");
                    
                    for (int k = 0; k < tokenCount; k++)
                        free(tokens[k]);
                    free(tokens);
                    exit(1);
                }
                tokens = temp;

                tokens[tokenCount++] = token;
            }
            start = i + 1;  // Move start to next token
        }
    }

    *count = tokenCount;
    return tokens;
}

int main() {
    char str[200];
    char delim;
    int count;

    printf("Enter a string: ");
    fgets(str, sizeof(str), stdin);
    str[strcspn(str, "\n")] = '\0';  // remove newline

    printf("Enter delimiter character: ");
    scanf(" %c", &delim);
